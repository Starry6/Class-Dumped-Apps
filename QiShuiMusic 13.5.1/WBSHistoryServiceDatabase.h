@interface WBSHistoryServiceDatabase : NSObject
@property (nonatomic) NSString databaseID;
@property (nonatomic) NSURL databaseURL;
@property (nonatomic) WBSHistoryServiceURLCompletion urlCompletion;
@property (nonatomic) Q hash;
@property (nonatomic) # superclass;
@property (nonatomic) NSString description;
@property (nonatomic) NSString debugDescription;
- (void)updateVisitWithIdentifier:title:completionHandler:;
- (void)clearHistoryItems:afterDate:beforeDate:tombstoneMode:completionHandler:;
- (void)recomputeItemScoresWithCompletionHandler:;
- (void)resetCloudHistoryDataWithCompletionHandler:;
- (void)checkIfLocalVisitExistsForDatabaseIDs:withCompletion:;
- (void)lastSeenDateForCloudClientVersion:completionHandler:;
- (void)warmUp;
- (void)fetchAutocompleteTriggersForURLString:completionHandler:;
- (void)clearHistoryVisitsAddedAfterDate:beforeDate:tombstoneMode:completionHandler:;
- (void)updateVisitWithIdentifier:removeAttributes:addAttributes:completionHandler:;
- (void)fetchEventsForListener:completionHandler:;
- (void)computeFrequentlyVisitedSites:minimalVisitCountScore:disallowList:allowList:options:currentTime:completionHandler:;
- (void)vacuumHistoryWithCompletionHandler:;
- (void)finishClearingHistoryIfNecessaryWithCompletionHandler:;
- (void)setTitle:ofTagWithID:completionHandler:;
- (void)updateDatabaseAfterSuccessfulSyncWithGeneration:completionHandler:;
- (void)convertTombstoneWithGenerationToSecureFormat:lastSyncedGeneration:completionHandler:;
- (BOOL)_shouldEmitLegacyTombstones;
- (void)setLastSeenDate:forCloudClientVersion:completionHandler:;
- (void)flushWithCompletionHandler:;
- (id)_clearAllHistoryInsertingTombstoneUpToDate:;
- (void)markEventsAsReceivedByListener:eventIDs:completionHandler:;
- (void)assignHistoryItemWithID:toTopicTagsWithIDs:completionHandler:;
- (void)fetchDomainExpansions:;
- (void)fetchWithOptions:predicate:completionHandler:;
- (void)visitsAndTombstonesNeedingSyncWithVisitSyncWindow:completionHandler:;
- (void)visitIdentifiersMatchingExistingVisits:completionHandler:;
- (void)getHighLevelHTTPFamilyDomainsVisitedAfterDate:beforeDate:onlyFromThisDevice:completionHandler:;
- (void)fetchAllTombstonesWithCompletionHandler:;
- (void)fetchDatabaseURL:;
- (void)fetchMetadataForKeys:completionHandler:;
- (void)searchForUserTypedString:options:currentTime:writeHandle:completionHandler:;
- (void)replayAndAddTombstones:completionHandler:;
- (void)fetchCloudClientVersionTable:;
- (void)_updateItem:visitCountScore:dailyVisitCounts:weeklyVisitCounts:shouldRecomputeDerivedVisitCounts:;
- (void)setMetadataValue:forKey:completionHandler:;
- (void)performMaintenanceWithAgeLimit:itemCountLimit:completionHandler:;
- (void)dispatchEvent:listenersToIgnore:persistForDelayedDispatching:completionHandler:;
- (void)expireOldVisits:completionHandler:;
- (id)databaseURL;
- (id)databaseID;
- (id)_generateItemsDictionary:;
- (id)init;
- (id)_insertVisit:;
- (void)_removeLegacyHistoryDatabaseIfNeeded;
- (id)_recomputeVisitScores:;
- (id)_recomputeItemScores:;
- (id)_collectDeletedHighLevelDomainsForPlan:;
- (BOOL)isOpen;
- (void)_checkpointWriteAheadLog;
- (long long)_lastSyncedGeneration;
- (void)_startingClearHistoryOperationForStartDate:endDate:;
- (id)_collectDeletedURLsForPlan:;
- (id)_executePlan:outDeletedItemCount:outDeletedVisitCount:;
- (long long)_writeEventToDatabase:listeners:error:;
- (void)_notifyDelegatesOfItemIDs;
- (id)_ensureLatestVisitsAreComputed;
- (double)_oldestLatestVisit;
- (id)_findAllRelatedVisits:forPlan:afterDate:beforeDate:;
- (int)_migrateToCurrentSchemaVersionIfNeeded;
- (id)_collectDeletedHostnamesForPlan:;
- (void)addAutocompleteTrigger:forURL:completionHandler:;
- (id)_updateVisitRedirectRelationships:;
- (long long)_permanentIDsForVisitIfAvailable:;
- (void)deletionPlanForItemsToDelete:visitsToDelete:completionHandler:;
- (BOOL)_commitPendingItems:;
- (void)close;
- (id)_preparePlan:ageLimit:itemCountLimit:;
- (id)_findItemIDsForPendingVisitsWithError:;
- (unsigned long long)_pruneTombstonesOnDatabaseQueueWithEndDatePriorToDate:error:;
- (id)_generateVisitsDictionary:;
- (void)deletionPlanForAgeLimit:itemCountLimit:completionHandler:;
- (void)_clearWBSHistorySQLiteStoreClearHistoryKeys;
- (id)_generateUpdatedLastVisit:;
- (id)_lastSeenDateForCloudClientVersion:;
- (id)_preparePlan:itemsToDelete:visitsToDelete:afterDate:beforeDate:;
- (long long)_currentGeneration;
- (id)_metadataForKey:error:;
- (BOOL)_addAutocompleteTrigger:forURL:error:;
- (void)_finishedClearingHistory;
- (void)clearAllHistoryInsertingTombstoneUpToDate:completionHandler:;
- (void)_notifyDelegatesOfVisitIDs;
- (void)ensureLatestVisitsAreComputed:;
- (void)createTagsForIdentifiers:withTitles:type:level:completionHandler:;
- (id)_expireOldVisits:;
- (id)_collectDeletedHighLevelDomainsFromDeletedHostnamesForPlan:;
- (id)_recomputeLatestVisitsForItems:error:;
- (id)_insertTombstone:;
- (id)_insertItem:;
- (id)urlCompletion;
- (void)getItemCountBeforeDate:completionHandler:;
- (id)_markEventsAsReceivedByListener:eventIDs:;
- (long long)_permanentIDsForItemIfAvailable:;
- (void)_notifyExecutionOfPlan:;
- (BOOL)_prepareDatabase:;
- (id)_fetchListenerNamesFromDatabase:;
- (long long)allocateTemporaryIDRange:;
- (void)_closeTagController;
- (id)_updateVisit:;
- (unsigned long long)_countOfItems;
- (id)_fetchObjectToTagMappingsWithOptions:predicate:writeDescriptor:;
- (void)pruneTombstonesWithEndDatePriorToDate:completionHandler:;
- (void)_updateVisitWithIdentifier:removeAttributes:addAttributes:pendingVisit:;
- (void).cxx_destruct;
- (id)_deleteOldestItems:forPlan:;
- (id)initWithID:url:options:error:;
- (void)_queuePendingUpdates;
- (id)_updateItem:;
- (id)_fetchTombstonesWithOptions:predicate:writeDescriptor:;
- (id)_clearHistoryVisitsAddedAfterDate:beforeDate:tombstoneMode:;
- (id)_convertTombstoneWithGenerationToSecureFormat:lastSyncedGeneration:;
- (BOOL)_reopenDatabase:;
- (id)_fetchVisitsWithOptions:predicate:writeDescriptor:;
- (void)_commitPendingUpdates;
- (void)database:hadSevereError:;
- (void)addDelegate:listenerName:forConnection:;
- (void)_dispatchEvent:listenersToIgnore:persistForDelayedDispatching:completionHandler:;
- (id)_setMetadataValue:forKey:;
- (void)_registerHistoryTagFrecencyScoringFunction;
- (id)_findObsoleteItemsForPlan:;
- (id)_fetchTagsWithOptions:predicate:writeDescriptor:;
- (id)_findAllRelatedVisitsToItems:forPlan:;
- (id)_generateDisposedVisitsForPlan:;
- (id)_updateListenerRegistration:lastSeen:;
- (void)_ensureDatabaseIsSynced;
- (id)_clearHistoryItems:afterDate:beforeDate:tombstoneMode:;
- (id).cxx_construct;
- (id)_dateForMetadataKey:error:;
- (id)_updateByAddingOrModifyObjects:updateCurrentGeneration:updateLastSyncGeneration:updateLastMaintenance:;
- (void)recordVisitWithIdentifier:sourceVisit:title:wasHTTPNonGet:loadSuccessful:origin:attributes:completionHandler:;
- (id)_addOrModifyObjects:;
- (id)_fetchEventsForListener:error:;
- (id)_insertTombstonesForURLs:afterDate:beforeDate:tombstoneMode:;
- (void)updateWithType:addOrModifyObjects:updateCurrentGeneration:updateLastSyncGeneration:updateLastMaintenance:completionHandler:;
- (BOOL)_commitPendingVisits:;
@end
